# Easy RDW-Web
Run your RDW controller on the web!

## 1. 安装
1. 将仓库克隆到本地；

2. 安装所需依赖；
```
pip install -r requirements.txt
```

3. 在8000端口运行网页服务器；
```
uvicorn main:app --host 0.0.0.0 --port 8000 # remember to open port8000 to public IP
```

## 2. 配置

您可使用 “Upload Config” 按钮上传配置文件，或使用 “Input Config” 按钮在线修改配置信息，改变模拟器中的环境形状、大小，障碍物分布与用户初始位置、用户行走路线等信息。此外，您还可以使用 “Environments” 按钮，应用平台内置的预设配置，或在预设的基础上进行修改。

控制器的配置信息以 JSON 表示，其中所有长度单位均为米，角度单位均为弧度，时间单位均为秒。具体格式与意义如下：

```JSON
{
    "border_phys": [    // 物理环境的边界，用3个及以上的点表示其多边形轮廓
        {
            "x": 0,
            "y": 0
        },
        {
            "x": 0,
            "y": 100
        },
        {
            "x": 100,
            "y": 0
        },
        {
            "x": 100,
            "y": 100
        }
    ],
    "border_virt": [    // 虚拟空间的边界
        {
            "x": 0,
            "y": 0
        },
        {
            "x": 0,
            "y": 200
        },
        {
            "x": 200,
            "y": 0
        },
        {
            "x": 200,
            "y": 200
        }
    ],
    "obstacles_phys": [ // 物理空间中的障碍物集合，每个障碍物使用若干点表示其多边形轮廓
        [
            {
                "x": 20,
                "y": 20
            },
            {
                "x": 20,
                "y": 40
            },
            {
                "x": 40,
                "y": 40
            },
            {
                "x": 40,
                "y": 20
            }
        ],
        [
            {
                "x": 60,
                "y": 60
            },
            {
                "x": 60,
                "y": 80
            },
            {
                "x": 80,
                "y": 80
            },
            {
                "x": 80,
                "y": 60
            }
        ]
    ],
    "obstacles_virt": [],   // 虚拟空间中的障碍物集合，同上
    "poi": [    // 用户行走过程中经过的点，最终行走轨迹为依次经过所有 poi 的折线
        {
            "x": 50,
            "y": 150
        },
        {
            "x": 150,
            "y": 150
        },
        {
            "x": 150,
            "y": 50
        },
        {
            "x": 50,
            "y": 50
        }
    ],
    "walk_speed": 1,    // 用户的行走速度
    "turn_speed": 0.1,  // 用户的转向速度
    "initial_user_phys": {  // 用户的初始物理位置
        "x": 50,
        "y": 50,
        "angle": 0, // 朝向
        "v": 0, // 线速度，设为0即可
        "w": 0  // 角速度，设为0即可
    },
    "initial_user_virt": {  // 用户的初始虚拟位置
        "x": 50,
        "y": 50,
        "angle": 0,
        "v": 0,
        "w": 0
    }
}
```

## 3. 连接控制器

本平台支持以两种方式连接用户实现的控制器：线上运行或本地运行。

### 3.1 线上运行

点击 “Online - Position”  按钮进入线上运行模式，您可使用 “Upload Code”按钮上传您实现的控制器代码文件，或使用 “Default Code” 按钮恢复平台内置的默认控制器。

您可以使用 “Toggle Mode” 按钮在 Position 与 Gain 模式之间切换。Position 模式要求控制器实现 ``

目前，在线运行仅支持 JavaScript 语言，您需要实现

## 4. 运行控制

## 5. 下载数据

在模拟或仿真运行中，您可以在 “Data Panel” 中实时查看运行数据，包括用户在物理与虚拟空间中的实时位置、当前行走总路程、触发重置次数等。在运行结束后，您可以使用 “Download Data” 按钮下载全程的记录数据。